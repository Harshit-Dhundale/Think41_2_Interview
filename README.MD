# Eâ€‘Commerce Customerâ€¯Support Chatbot  
**Think41 â€” 2ndâ€¯Interview Project**

A containerâ€‘ready, fullâ€‘stack chatbot that answers product, inventory, and orderâ€‘status questions for a fictitious clothing retailer.

<p align="center">
  <img src="dashboard.png" width="900" alt="Dashboard"/><br/>
  <em>ğŸ“ŠÂ Full dashboard â€“ conversation list + chat window</em>
</p>

<p align="center">
  <img src="sample.png" width="900" alt="Sample chat"/><br/>
  <em>ğŸ’¬Â Sample session answering the four mandatory questions</em>
</p>

<p align="center">
  <img src="mongodb.png" width="800" alt="MongoDB collections"/><br/>
  <em>ğŸ—„ï¸Â MongoDB collections after CSV ingestion (â‰ˆâ€¯1â€¯M rows)</em>
</p>

<p align="center">
  <img src="swagger.png" width="800" alt="FastAPI docs"/><br/>
  <em>âš™ï¸Â Autoâ€‘generated FastAPI docs â€“ chat & conversation routes</em>
</p>

> **ğŸ¥ Demo video â€“ *coming soon***  
> _I will embed a YouTube link here once the walkthrough is recorded._


## ğŸ“‹ Assignment Recap

| Milestone | Goal |
|-----------|------|
| 1 | Repo & env setup (backendÂ +Â frontend folders) |
| 2 | **DB load** â€“ ingest six CSVs into MongoDB |
| 3 | Design schema for multiâ€‘user conversation history |
| 4 | Core REST API `/api/chat` |
| 5 | Integrate **Groq LLM (compoundâ€‘beta)** for naturalâ€‘language replies |
| 6â€¯â€“â€¯8 | Build React UI (ChatWindow, MessageBubble, UserInput, history panel) |
| 9 | Endâ€‘toâ€‘end integration (CORS, state, API hook) |
| 10 | **Dockerize**â€¯all services & write documentation |

Dataset: <https://github.com/recruit41/ecommerce-dataset>  
Requirements excerpt (problem statement) is reproduced [here](./docs/problem_statement.md) for archival.

---

## ğŸ—ï¸ DesignÂ Philosophy & Approach

1. **DBâ€‘first, LLMâ€‘second**  
   *Frequentlyâ€‘asked queries (â€œtop 5 sold productsâ€, stock left, order status) are answered straight from MongoDB pipelines.*  
   When a DB answer is partial or absent, we fall back to the LLM with recent context.

2. **FastAPI** for quick async IO + automatic OpenAPI docs (see screenshot).

3. **Groqâ€¯compoundâ€‘beta** instead of GPTâ€¯3.5:  
   *Free tier, OpenAIâ€‘compatible SDK, ~2â€‘3Ã— faster in practice.*

4. **Next.jsÂ 14 + ReactÂ 18 (app router)** with **CSSâ€¯Modules**  
   (simpler than Tailwind for the assignment after issues encountered).

5. **React Context** over Redux/Zustand: lightweight; we only need messages, loading state, conversation list, and userId.

6. **Containerâ€‘first** â€” devs/testers run `dockerâ€‘compose up --build` once and everything (Mongoâ€¯+â€¯backendâ€¯+â€¯frontend) is live.

---

## ğŸ—ºï¸ Architecture Overview

```

dockerâ€‘compose
â”‚
â”œâ”€ mongo            # seeded by ingest.py
â”‚
â”œâ”€ backend (FastAPI)
â”‚   â”œâ”€ /api/chat                POST   chat endpoint
â”‚   â”œâ”€ /api/conversations       GET    list
â”‚   â””â”€ /api/conversations/{id}  GET    detail
â”‚
â””â”€ frontend (Next.js 14)
â”œâ”€ ConversationPanel
â”œâ”€ ChatWindow / MessageBubble / InputArea
â””â”€ ChatContext (React state)

```

### Message Flow

```

User â†’ React â†’ POST /api/chat
â†³ quick DB pipeline?        YES â†’ json answer
NO  â†’ Groq LLM
â†‘ recent msgs (5)  â†‘ optional DB\_RESULT

````

---

## âš¡ QuickÂ StartÂ (Recommended: Docker)

```bash
git clone https://github.com/Harshit-Dhundale/Think41_2_Interview.git
cd Think41_2_Interview

# 1. root .env
cat <<EOF > .env
MONGO_DB=ecom
GROQ_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxx
EOF

# 2. oneâ€‘shot build & run
docker compose up --build
````

| Service                     | URL                                                      |
| --------------------------- | -------------------------------------------------------- |
| Frontend (Next.js)          | [http://localhost:3000](http://localhost:3000)           |
| Backend Swagger UI          | [http://localhost:8000/docs](http://localhost:8000/docs) |
| Mongo (if you need Compass) | `mongodb://localhost:27017/ecom`                         |

> On first run the `backend` container executes `python app/ingest.py` (â‰ˆâ€¯1â€¯minute â€“ loads 6 CSVs, builds indexes).

---

## ğŸ› ï¸ LocalÂ Development (without Docker)

<details>
<summary>Show steps</summary>

```bash
# MongoDB
docker run -d -p 27017:27017 --name mongo mongo:6

# Backend
cd backend
python -m venv .venv && source .venv/bin/activate
pip install -r requirements.txt
export MONGO_URI=mongodb://localhost:27017/ecom
export GROQ_API_KEY=sk-...
python app/ingest.py      # 1â€‘time load
uvicorn app.main:app --reload --port 8000

# Frontend
cd ../frontend
npm install
echo "NEXT_PUBLIC_BACKEND_URL=http://localhost:8000" > .env
npm run dev               # http://localhost:3000
```

</details>

---

## ğŸ“‚ Key Files & Folders

```
backend/
  Dockerfile
  app/
    chat.py            # /api/chat route
    queries.py         # DB pipelines (top sold, stock left, etc.)
    llm.py             # Groq client wrapper
    ingest.py          # CSV â†’ Mongo loader
frontend/
  Dockerfile
  src/components/â€¦     # UI
  src/context/ChatContext.tsx
docker-compose.yml
README.md
```

---

## ğŸ”‘ EnvironmentÂ Variables

| Scope             | Keys                                       |
| ----------------- | ------------------------------------------ |
| **root `.env`**   | `MONGO_DB`Â `GROQ_API_KEY` (docker compose) |
| **backend/.env**  | `MONGO_URI` (overridden in compose)        |
| **frontend/.env** | `NEXT_PUBLIC_BACKEND_URL`                  |

---

## ğŸ§ª SampleÂ Queries to Try

| Question                                           | Expected behaviour                             |
| -------------------------------------------------- | ---------------------------------------------- |
| â€œWhat are the **topÂ 5 most sold products**?â€       | Aggregation pipeline returns list (with units) |
| â€œShow me the **status of orderâ€¯IDâ€¯12345**.â€        | Exact match in `orders`Â collection             |
| â€œHow many **ClassicÂ Tâ€‘Shirts** are left in stock?â€ | Counts unsold items in `inventory_items`       |
| Freeâ€‘form followâ€‘ups                               | Routed to Groq LLM with context                |

---